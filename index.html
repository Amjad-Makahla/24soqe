<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        fontFamily: {
          tajawal: ["Tajawal", "sans-serif"],
        }
      }
    }
  }
</script>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Tajawal', sans-serif; }
</style>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>24soqe | ุณูู ุงูุณูุงุฑุงุช</title>
</head>
<body class="bg-gradient-to-b from-gray-900 via-black to-gray-800 text-white">

<!-- Navbar -->
<nav class="flex items-center justify-between px-6 py-3 bg-black bg-opacity-70 shadow-lg">
  <div class="flex items-center space-x-4 rtl:space-x-reverse">
    <div class="w-16 h-16 rounded-full bg-gradient-to-tr from-cyan-400 to-blue-500 p-1 animate-pulse shadow-lg">
      <img src="assets/24Log.png" alt="24soqe Logo" class="w-full h-full object-cover rounded-full border-2 border-white shadow">
    </div>
    <h1 class="text-2xl font-bold text-red-500">24soqe</h1>
  </div>
 <div class="space-x-4 rtl:space-x-reverse flex items-center gap-4" id="auth-buttons">

  <!-- ุณูุชู ุชูููุฏ ุงูุฃุฒุฑุงุฑ ุญุณุจ ุญุงูุฉ ุงููุณุชุฎุฏู -->
</div>
 

</nav>

<!-- Hero -->
<section class="text-center py-20 px-4 bg-gradient-to-r from-gray-900 to-gray-800">
  <h2 class="text-4xl md:text-5xl font-bold mb-4">ูุฑุญุจูุง ุจู ูู ุฃูุจุฑ ุณูู ูุจูุน ูุดุฑุงุก ุงูุณูุงุฑุงุช</h2>
  <p class="text-lg text-gray-300 mb-8">ุงุนุฑุถ ุณูุงุฑุชู ุฎูุงู ุฏูุงุฆูุ ุฃู ุงุจุญุซ ุนู ุณูุงุฑุฉ ุฃุญูุงูู</p>
  <div class="flex flex-col md:flex-row justify-center gap-4 max-w-2xl mx-auto">
    <input type="text" placeholder="ูุงุฑูุฉุ ููุฏูู..." class="w-full px-4 py-3 rounded-xl text-black">
    <button class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-bold">๐ ุงุจุญุซ</button>
  </div>
</section>

<!-- ููุชุฑุฉ ุงูุจุญุซ -->


<!-- ุงูุณูุงุฑุงุช ุงููููุฒุฉ -->
<section class="py-16 px-6 max-w-6xl mx-auto">
  <h3 class="text-3xl font-bold mb-8 text-center text-red-500">๐ุณูุงุฑุงุช ููุจูุน</h3>
  <div id="featured-cars" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>
</section>
<section class="bg-gray-900 py-10 px-4 md:px-8">
  <h3 class="text-2xl font-bold text-red-500 mb-6 text-center">๐ ููุชุฑ ุงูุจุญุซ</h3>
 <form id="filter-form" method="GET" class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-6xl mx-auto text-black">

  <select name="brand" class="rounded-xl p-3">
    <option value="">ุงุฎุชุฑ ุงููุงุฑูุฉ</option>
    <option value="1">ุชูููุชุง</option>
    <option value="2">ููุณุงู</option>
    <option value="3">ูููุฏุงู</option>
    <option value="4">ููุง</option>
    <option value="5">BMW</option>
  </select>

  <select name="model" class="rounded-xl p-3">
    <option value="">ุงุฎุชุฑ ุงูููุฏูู</option>
    <option value="1">ููุฑููุง</option>
    <option value="2">ูุงูุฑู</option>
    <option value="3">ุตูู</option>
    <option value="4">ุงููุชุฑุง</option>
    <option value="5">ุณุจูุฑุชุงุฌ</option>
    <option value="6">X5</option>
  </select>

  <select name="city" class="rounded-xl p-3">
    <option value="">ุงููุฏููุฉ</option>
    <option value="1">ุนูุงู</option>
    <option value="2">ุงูุฒุฑูุงุก</option>
    <option value="3">ุงุฑุจุฏ</option>
    <option value="4">ุงูุนูุจุฉ</option>
  </select>

  <input type="number" name="price_min" placeholder="ุงูุณุนุฑ ูู" class="rounded-xl p-3">
  <input type="number" name="price_max" placeholder="ุงูุณุนุฑ ุฅูู" class="rounded-xl p-3">

  <select name="fuel" class="rounded-xl p-3">
    <option value="">ููุน ุงููููุฏ</option>
    <option value="1">ุจูุฒูู</option>
    <option value="2">ุฏูุฒู</option>
    <option value="3">ููุฑุจุงุก</option>
    <option value="4">ูุงูุจุฑุฏ</option>
  </select>

  <button type="submit" class="bg-red-600 text-white py-3 px-6 rounded-xl col-span-full hover:bg-red-700 font-bold mt-2">๐ ุงุจุญุซ ุงูุขู</button>
</form>

</section>
<!-- CTA -->
<section class="text-center py-16 bg-red-600">
  <h3 class="text-3xl font-bold mb-4">๐ ุฌุงูุฒ ุชุจูุน ุณูุงุฑุชูุ</h3>
  <p class="mb-6 text-white">ุงูุดุฑ ุฅุนูุงูู ุงูุขู ุนูู 24soqe ููุตูู ุณูุงุฑุชู ูููุดุชุฑู ุงูุตุญ</p>
  <a href="add-car.php" class="bg-white text-red-600 px-6 py-3 font-bold rounded-xl shadow hover:bg-gray-100">ุฃุถู ุฅุนูุงูู ุงูุขู</a>
</section>

<!-- Footer -->
<footer class="bg-black text-gray-400 text-center py-6">
  <p>&copy; 2024 24soqe. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
</footer>

<script>
fetch('fetch_cars.php')
  .then(response => response.json())
  .then(data => {
    const container = document.getElementById('featured-cars');
    if (data.length === 0) {
      container.innerHTML = '<p class="text-center text-gray-400">ูุง ุชูุฌุฏ ุณูุงุฑุงุช ูุนุฑุถูุง ุญุงููุงู.</p>';
      return;
    }

    container.innerHTML = data.map(car => `
      <div class="bg-white text-black rounded-xl shadow overflow-hidden hover:scale-105 transition duration-300">
       <img src="${car.image || 'assets/default_car.png'}" alt="Car" class="w-full h-56 object-cover">

        <div class="p-4">
          <h4 class="text-xl font-bold mb-1">${car.brand || 'ูุงุฑูุฉ ุบูุฑ ูุญุฏุฏุฉ'} ${car.model || ''} ${car.year || ''}</h4>
          <p class="text-gray-700 mb-1">${parseInt(car.price).toLocaleString()} ุฏููุงุฑ</p>
          <p class="text-sm text-gray-500">${car.city || 'ุบูุฑ ูุญุฏุฏุฉ'}</p>
          <a href="car_details.php?id=${car.id}" class="text-blue-600 hover:underline text-sm">ุนุฑุถ ุงูุชูุงุตูู</a>
<form method="POST" action="wish_list.php" onsubmit="return handleWishList(event, ${car.id})">
  <button type="submit" class="text-red-500 hover:text-red-700 text-sm mt-1">โค๏ธ ุฃุถู ููููุถูุฉ</button>
</form>

        </div>
      </div>
    `).join('');
  })
  .catch(err => console.error('ุฎุทุฃ ูู ุฌูุจ ุงูุณูุงุฑุงุช:', err));
</script>
<script>
  const authButtons = document.getElementById('auth-buttons');
  const loggedIn = localStorage.getItem('loggedIn') === 'true';

  if (loggedIn) {
    // ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
   authButtons.innerHTML = `
  <a href="my_wishlist.php" class="text-white hover:text-red-400">โค๏ธ ุงูููุถูุฉ</a>
  <a href="#" onclick="logout()" class="text-white hover:text-red-500">ุชุณุฌูู ุงูุฎุฑูุฌ</a>
  <a href="add-car.php" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl shadow">ุฃุถู ุฅุนูุงูู</a>
`;

  } else {
    // ูุด ูุณุฌู ุฏุฎูู
    authButtons.innerHTML = `
      <a href="login.php" class="text-white hover:text-red-500">ุชุณุฌูู ุงูุฏุฎูู</a>
      <a href="signup.php" class="text-white hover:text-red-500">ุฅูุดุงุก ุญุณุงุจ</a>
      <a href="login.php" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl shadow">ุฃุถู ุฅุนูุงูู</a>
    `;
  }

  function logout() {
    localStorage.removeItem('loggedIn');
    window.location.reload(); // ูุนูุฏ ุชุญููู ุงูุตูุญุฉ ูุชุญุฏูุซ ุงูุฃุฒุฑุงุฑ
  }
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const loginLink = document.querySelector("a[href='login.php']");
    const signupLink = document.querySelector("a[href='signup.php']");
    const logoutBtn = document.createElement("a");
    logoutBtn.textContent = "ุชุณุฌูู ุงูุฎุฑูุฌ";
    logoutBtn.className = "text-white hover:text-red-500 cursor-pointer";
    logoutBtn.onclick = function () {
      localStorage.removeItem("loggedIn");
      window.location.href = "index.html";
    };

    const addCarBtn = document.querySelector("a[href='add-car.php']");

    const nav = document.querySelector("nav .space-x-4");

    const isLoggedIn = localStorage.getItem("loggedIn") === "true";

    if (isLoggedIn) {
      if (loginLink) loginLink.remove();
      if (signupLink) signupLink.remove();
      nav.insertBefore(logoutBtn, addCarBtn);

      // ุฅุชุงุญุฉ ุฒุฑ ุฅุถุงูุฉ ุฅุนูุงู
      addCarBtn.href = "add-car.php";
    } else {
      // ูุง ูุณุชุทูุน ุงูุถุบุท ุนูู "ุฃุถู ุฅุนูุงูู" ุฅูุง ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู
      addCarBtn.href = "login.php";
    }
  });
</script>
<script>
  function handleWishList(event, carId) {
    event.preventDefault();
    const loggedIn = localStorage.getItem('loggedIn') === 'true';
    if (!loggedIn) {
      alert("ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู ูุฅุถุงูุฉ ุงูุณูุงุฑุฉ ุฅูู ุงูููุถูุฉ.");
      window.location.href = 'login.php';
      return false;
    }

    // ุฅุฑุณุงู ุงูุทูุจ ุฅูู wish_list.php ุจุงุณุชุฎุฏุงู Fetch
    fetch('wish_list.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: `car_id=${carId}`
    })
    .then(response => response.text())
    .then(msg => {
      alert("โ ุชู ุฅุถุงูุฉ ุงูุณูุงุฑุฉ ุฅูู ุงูููุถูุฉ!");
    })
    .catch(err => {
      console.error('ูุดู ุงูุฅุถุงูุฉ ุฅูู ุงูููุถูุฉ:', err);
      alert("โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุถุงูุฉ ุงูุณูุงุฑุฉ.");
    });

    return false;
  }
</script>


</body>
</html>
